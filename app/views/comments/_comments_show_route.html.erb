<div class="comments-routes-show">
  <div data-controller="insert-route-comment">
    <div class="d-flex justify-content-end me-4" data-action="click->insert-route-comment#insertRouteComment">
      <button class="btn btn-warning" data-insert-route-comment-target="insertCommentBtn">Insert a Route Comment</button>
    </div>
    <div class="my-4 comment-form" data-insert-route-comment-target="commentForm">
      <%= render 'comments/form' %>
    </div>
  </div>
  <% if @route.comments.present? %>
    <h3>Route <strong><%= @route.title %></strong> Comments:</h3>
    <% @comments.each do |comment| %>
      <div class="border p-4 my-2">
        <h5><%= comment.description %></h5>
        <div class="border-bottom"></div>
        <% if comment.user.avatar.present? %>
          <div class="d-flex mt-2">
            <div class="me-2">
              <%= image_tag comment.user.avatar, class: "avatar" %>
            </div>
          <% else %>
            <div class="me-2">
              <%= image_tag 'user-photo.png', class: "avatar" %>
            </div>
          <% end %>
          <div>
            <%= link_to user_path(comment.user) do %>
              <p class="mb-0"><%= comment.user.first_name %></p>
            <% end %>
            <p class="mb-0"><%= comment.created_at.strftime("%B %d, %Y") %></p>
          </div>
        </div>
      </div>
    <% end %>
  <% end %>
</div>
