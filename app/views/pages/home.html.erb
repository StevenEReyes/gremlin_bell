    <% if user_signed_in? %>
  <div class="home bg-red">
    <div class="container">
      <%= render 'shared/logo_btn_top_white', user: (@user || current_user) %>
      <%= render 'shared/link_user_profile', user: (@user || current_user) %>
      <div class="discover-routes">
        <h3 class="m-0 p-0">Discover new routes</h3>
        <p class="pb-0">Find the best route for you</p>
      </div>
    </div>
    <div class="bg-white">
      <div class="container">
        <div class="row d-flex justify-content-center">
          <div class="col-10">
            <%= render 'components/search_bar' %>
          </div>
        </div>
        <div class="d-flex justify-content-between mt-4 mx-2">
          <h3>Nearby</h3>
          <%= link_to routes_path  do %>
            <i class="fa-solid fa-circle-chevron-right"></i>
          <% end %>
        </div>
        <div class="home-page-route-cards">
          <div class="d-flex flex-row flex-nowrap overflow-auto">
            <% @routes.sort_by { |i| -i.created_at.to_i }.last(5).each do |route| %>
              <div class="col-9 col-md-3 me-2">
                <%= render 'components/route_card', route: route %>
              </div>
            <% end %>
          </div>
        </div>
        <div class="my-4 pt-4">
          <h3 class="my-4">Search for...</h3>
          <div class="routes-tags">
            <div class="container">
              <div class="row justify-content-center">
                <% @ride_types.each do |type| %>
                  <div class="col-md-3 col-6 text-center mb-2">
                    <%= link_to routes_path(query: {ride_type: type }) do %>
                      <span class="route-tag rounded-pill"><%= type %></span>
                    <% end %>
                  </div>
                <% end %>
              </div>
            </div>
          </div>
        </div>
        <div class="feed-photos">
          <h3>Your friends..</h3>
          <% if @routes_with_photos.any? %>
            <div class="row d-flex justify-content-center">
              <% @routes_with_photos.each do |route| %>
                <% route.photos.each do |photo| %>
                  <div class="border photo-item col-10 col-md-4">
                    <%= link_to route_path(route) do %>
                      <div class="photo-container">
                        <%= image_tag(photo, alt: "Photo from #{route.title} by #{route.user.first_name}", class: "photo") %>
                      </div>
                    <% end %>
                    <div class="d-flex mt-2">
                      <div class="user-avatar me-2">
                        <% if route.user.avatar.present? %>
                          <div class="p-2"><%= cl_image_tag route.user.avatar.key, class: "avatar" %></div>
                        <% else %>
                          <div class="p-2"><%= image_tag "user-photo.png", class: "avatar" %></div>
                        <% end %>
                      </div>
                      <p>Posted by <%= link_to route.user.first_name, user_path(route.user) %> on <%= link_to route.title, route_path(route) %></p>
                    </div>
                  </div>
                <% end %>
              <% end %>
            </div>
          <% else %>
            <p>No photos from users you follow.</p>
          <% end %>
        </div>
      </div>
    </div>
  <% else %>
    <div class="m-4">
      <%= link_to "Login", new_user_session_path %>
    </div>
    <div class="m-4">
      <%= link_to "Register", new_user_registration_path %>
    </div>
  <% end %>
</div>
